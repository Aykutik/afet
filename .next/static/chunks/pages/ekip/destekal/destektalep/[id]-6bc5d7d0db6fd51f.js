(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{4655:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ekip/destekal/destektalep/[id]",function(){return a(9173)}])},3311:function(e,t,a){"use strict";var l=a(5893);t.Z=function(e){let{handleSubmit:t,tur:a,action:s="submit",text:n}=e;return(0,l.jsx)(l.Fragment,{children:"form"===a?(0,l.jsx)("button",{type:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 mt-10",onSubmit:t,children:n}):(0,l.jsx)("button",{type:"button",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ",onClick:t,children:n})})}},2056:function(e,t,a){"use strict";var l=a(5893),s=a(7294);a(5675);var n=a(9834),i=a(8193),r=a(8433),d=a(3299),c=a(1163),o=a(2920);let m=e=>{let{setTamamlandı:t,talep:a,kolon:m}=e,x=(0,c.useRouter)(),{data:p}=(0,d.useSession)(),[u,h]=(0,s.useState)("");console.log("talep"),console.log(a);let f=new Date,j=String(f.getDate()).padStart(2,"0"),g=String(f.getMonth()+1).padStart(2,"0"),v=f.getFullYear(),b=v+"-"+g+"-"+j,N=async()=>{let e="";"destekal"==m?e="destekal_tamamla":"destekol"==m&&(e="destekol_tamamla");try{await r.Z.post("".concat("http://localhost:3000/api/x7wUk5leY1jv","/ekip/").concat(e,"?getir=").concat(a.id,"&durum=tamamla&kapatan=").concat(null==p?void 0:p.user.name,"&kapatmatarihi=").concat(b,"&kapatanaciklama=").concat(u)),o.Am.success("Talep Tamamlandı"),x.push("/ekip/admin"),t(!1)}catch(e){console.log(e),o.Am.error("Talep Tamamlanamadı")}};return(0,l.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen z-50 after:content-[''] after:w-screen after:h-screen after:bg-white after:absolute after:top-0 after:left-0 after:opacity-60 grid place-content-center",children:(0,l.jsx)(n.default,{onOutsideClick:()=>t(!1),children:(0,l.jsx)("div",{className:"w-full h-full grid place-content-center",children:(0,l.jsxs)("div",{className:"relative z-50 md:w-[600px] w-[370px] bg-white border-2 p-10 text-center rounded-3xl",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-5",children:"Talebi Tamamla"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{onChange:e=>h(e.target.value),type:"text",className:"w-full border-2 border-gray-300 p-2 rounded-md mb-5",placeholder:"A\xe7ıklama"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("button",{type:"button",onClick:N,className:"items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,l.jsx)("a",{href:"#",children:"Tamamla"})})})]}),(0,l.jsx)("button",{className:"absolute top-4 right-4",onClick:()=>t(!1),children:(0,l.jsx)(i.LHV,{className:"hover:text-primary transation-all"})})]})})})})};t.Z=m},9173:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return c}});var l=a(5893),s=a(7294),n=a(8433);a(1664);var i=a(3311),r=a(3299),d=a(2056),c=!0;t.default=function(e){var t,a,c,o,m,x,p,u,h,f,j,g,v;let{id:b}=e,[N,y]=(0,s.useState)([]),[w,k]=(0,s.useState)(!1),{data:S}=(0,r.useSession)();console.log(S);let _=async()=>{try{let e=await n.Z.get("".concat("http://localhost:3000/api/x7wUk5leY1jv","/ekip/destekal?getir=").concat(b,"&durum=id"));y(e.data),console.log(e.data)}catch(e){console.log(e)}};(0,s.useEffect)(()=>{_()},[]);let T=async()=>{!1==w?k(!0):k(!1)},C=async()=>{try{let e=await n.Z.post("".concat("http://localhost:3000/api/x7wUk5leY1jv","/ekip/destekal_tamamla?getir=").concat(b,"&durum=sil&kapatan=").concat(null==S?void 0:S.user.name,"&kapatmatarihi=").concat(tarih));y(e.data),console.log(e.data)}catch(e){console.log(e)}};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative z-10 overflow-hidden lg:py-[120px]",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("div",{className:"p-1.5 w-full lg:w-1/2 inline-block",children:[(0,l.jsx)("div",{className:"bg-white border rounded-md px-2 py-2 mb-2 font-bold",children:(0,l.jsx)("h1",{children:"Destek Talepleri"})}),(0,l.jsx)("div",{className:"overflow-hidden border rounded-lg bg-arkaplan",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50 h-8 text-[9pt] text-left tel:text-[9pt]",children:(0,l.jsxs)("tr",{className:"px-2",children:[(0,l.jsx)("th",{className:"px-2",children:"KİŞİSEL BİLGİLER"}),(0,l.jsx)("th",{className:"px-2"}),(0,l.jsx)("th",{className:"px-2"})]})}),(0,l.jsx)("thead",{className:"bg-gray-50 h-8 text-[9pt] text-left tel:text-[9pt]",children:(0,l.jsxs)("tr",{className:"px-2",children:[(0,l.jsx)("th",{className:"px-2",children:"Ad Soyad"}),(0,l.jsx)("th",{className:"px-2",children:"TC No"}),(0,l.jsx)("th",{className:"px-2",children:"İletişim"})]})}),(0,l.jsx)("tbody",{className:"bg-white text-[8pt]",children:N.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-nowrap",children:e.adsoyad}),(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-nowrap",children:e.tcno}),(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-nowrap",children:e.telefon})]},e.id))})]})}),(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-5",children:[(0,l.jsx)("thead",{className:"bg-gray-50 h-8 text-[9pt] text-left tel:text-[9pt]",children:(0,l.jsxs)("tr",{className:"px-2",children:[(0,l.jsx)("th",{className:"px-2",children:"Talep"}),(0,l.jsx)("th",{className:"px-2"}),(0,l.jsx)("th",{className:"px-2"})]})}),(0,l.jsx)("tbody",{className:"bg-white text-[7pt]",children:(0,l.jsx)("tr",{className:"",children:(0,l.jsx)("td",{colSpan:3,className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-pre-line",children:null===(t=N[0])||void 0===t?void 0:t.konu})})})]}),(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-5",children:[(0,l.jsx)("thead",{className:"bg-gray-50 h-8 text-[9pt] text-left tel:text-[9pt]",children:(0,l.jsxs)("tr",{className:"px-2",children:[(0,l.jsx)("th",{className:"px-2",children:"Durum"}),(0,l.jsx)("th",{className:"px-2",children:(null===(a=N[0])||void 0===a?void 0:a.durum)==="beklemede"?"":"Kapatan"}),(0,l.jsx)("th",{className:"px-2",children:(null===(c=N[0])||void 0===c?void 0:c.durum)==="beklemede"?"":"Kapatma Tarihi"}),(0,l.jsx)("th",{className:"px-2",children:(null===(o=N[0])||void 0===o?void 0:o.durum)==="beklemede"?"":"Kapatan A\xe7ıklama"})]})}),(0,l.jsx)("tbody",{className:"bg-white text-[7pt]",children:(0,l.jsxs)("tr",{className:"",children:[(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-pre-line",children:null===(m=N[0])||void 0===m?void 0:m.durum}),(null===(x=N[0])||void 0===x?void 0:x.durum)=="tamamlandı"?(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-pre-line",children:null===(p=N[0])||void 0===p?void 0:p.kapatan}):(0,l.jsx)("td",{}),(null===(u=N[0])||void 0===u?void 0:u.durum)=="tamamlandı"?(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-pre-line",children:(null===(h=N[0])||void 0===h?void 0:h.kapatmatarihi).slice(0,10)}):(0,l.jsx)("td",{}),(null===(f=N[0])||void 0===f?void 0:f.durum)=="tamamlandı"?(0,l.jsx)("td",{className:"px-2 py-2 tel:px-2 tel:py-1 whitespace-pre-line",children:null===(j=N[0])||void 0===j?void 0:j.kapatanaciklama}):(0,l.jsx)("td",{})]})})]})]})}),(0,l.jsx)("div",{className:"mx-auto w-[220px]",children:(0,l.jsxs)("div",{className:"mt-5 p-1 ",children:[(null===(g=N[0])||void 0===g?void 0:g.durum)==="beklemede"?(0,l.jsx)("div",{children:(0,l.jsx)(i.Z,{handleSubmit:T,text:"Tamamlandı olarak işaretle",action:"Button"})}):(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",className:"items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,l.jsx)("a",{href:"#",children:"Tamamlandı"})})}),(0,l.jsx)("div",{className:"w-[212px]",children:(null===(v=N[0])||void 0===v?void 0:v.silindi)==0?(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(i.Z,{handleSubmit:C,text:"Sil",action:"Button"})}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("button",{type:"button",className:"items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,l.jsx)("a",{href:"#",children:"Silindi"})})})})})]})})]}),w&&(0,l.jsx)(d.Z,{setTamamlandı:k,talep:N[0],kolon:"destekal"})]})}}},function(e){e.O(0,[617,433,966,774,888,179],function(){return e(e.s=4655)}),_N_E=e.O()}]);